<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Mo</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">haccepted-0.1.0.0: Data structures and algorithms</span><ul class="links" id="page-menu"><li><a href="src/Mo.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Mo</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h2>Mo's algorithm</h2><p>Useful for answering certain range queries on a static sequence. The algorithm works by maintaining
some state for a current range, and updating the state by adding or removing elements one by one.
An important parameter for the algorithm is the block size. If the range size is n, number of
queries is q, block size is b, state update takes time f(n), getting the answer for the current
state takes g(n), then the algorithm answers all queries in
    O(q log q + bq * f(n) + n^2/b * f(n) + q * g(n))
A suitable value of block size minimizes run time.
For example, when q ~ n, f(n) = O(1), g(n) = O(1), setting b = sqrt(n) gives run time O(n sqrt(n)).
For f(n) = O(log n), a better choice of b is sqrt(n/log n) giving run time O(n sqrt(n log n)). In
practice, it works to experiment a bit and choose a good fixed value.</p><p>Sources:</p><ul><li><a href="https://cp-algorithms.com/data_structures/sqrt_decomposition.html">https://cp-algorithms.com/data_structures/sqrt_decomposition.html</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:MoQuery">MoQuery</a> = <a href="#v:MoQuery">MoQuery</a> {<ul class="subs"><li><a href="#v:ql_">ql_</a> :: !<a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li><a href="#v:qr_">qr_</a> :: !<a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li><a href="#v:qtag_">qtag_</a> :: !<a href="Mo.html#t:Tag" title="Mo">Tag</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Tag">Tag</a> = <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:runMo">runMo</a> :: <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m ()) -&gt; (<a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m ()) -&gt; m a -&gt; [<a href="Mo.html#t:MoQuery" title="Mo">MoQuery</a>] -&gt; m [(<a href="Mo.html#t:Tag" title="Mo">Tag</a>, a)]</li><li class="src short"><a href="#v:sqrtSize">sqrtSize</a> :: <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MoQuery" class="def">MoQuery</a> <a href="src/Mo.html#MoQuery" class="link">Source</a> <a href="#t:MoQuery" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MoQuery" class="def">MoQuery</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ql_" class="def">ql_</a> :: !<a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:qr_" class="def">qr_</a> :: !<a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:qtag_" class="def">qtag_</a> :: !<a href="Mo.html#t:Tag" title="Mo">Tag</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MoQuery">Instances</h4><details id="i:MoQuery" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MoQuery:Show:1"></span> <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Mo.html#t:MoQuery" title="Mo">MoQuery</a></span> <a href="src/Mo.html#line-32" class="link">Source</a> <a href="#t:MoQuery" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MoQuery:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Mo.html">Mo</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Mo.html#t:MoQuery" title="Mo">MoQuery</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Mo.html#t:MoQuery" title="Mo">MoQuery</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Mo.html#t:MoQuery" title="Mo">MoQuery</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MoQuery:NFData:2"></span> <a href="https://hackage.haskell.org/package/deepseq-1.4.4.0/docs/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> <a href="Mo.html#t:MoQuery" title="Mo">MoQuery</a></span> <a href="src/Mo.html#line-61" class="link">Source</a> <a href="#t:MoQuery" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MoQuery:NFData:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Mo.html">Mo</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rnf">rnf</a> :: <a href="Mo.html#t:MoQuery" title="Mo">MoQuery</a> -&gt; () <a href="#v:rnf" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Tag" class="def">Tag</a> = <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Mo.html#Tag" class="link">Source</a> <a href="#t:Tag" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runMo" class="def">runMo</a> :: <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; (<a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m ()) -&gt; (<a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; m ()) -&gt; m a -&gt; [<a href="Mo.html#t:MoQuery" title="Mo">MoQuery</a>] -&gt; m [(<a href="Mo.html#t:Tag" title="Mo">Tag</a>, a)] <a href="src/Mo.html#runMo" class="link">Source</a> <a href="#v:runMo" class="selflink">#</a></p><div class="doc"><p>Run Mo's algorithm given the block size, state update and answer functions, and queries. See above
 for time complexity.</p></div></div><div class="top"><p class="src"><a id="v:sqrtSize" class="def">sqrtSize</a> :: <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Mo.html#sqrtSize" class="link">Source</a> <a href="#v:sqrtSize" class="selflink">#</a></p><div class="doc"><p>Square root of an Int, rounded to an Int. O(1).</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>